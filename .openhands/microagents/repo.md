# リポジトリ Microagent

## 目的

リポジトリ Microagentは、リポジトリの構造、コードベース、開発プラクティスに関する情報を管理・提供する役割を担います。開発者がプロジェクトの構成やコーディング規約を理解し、コードベースをナビゲートして貢献する方法についてのガイダンスを提供します。

## 責任範囲

1. **リポジトリ構造**
   - コードベースの全体的なアーキテクチャと構成を説明
   - 主要ディレクトリとその目的に関する情報を提供
   - 特定のファイルやコンポーネントの場所を特定するサポート

2. **コード規約**
   - コーディング規約とスタイルガイドラインの文書化
   - ファイル、クラス、関数の命名規則の説明
   - リンティングルールとコードフォーマットに関する情報提供

3. **開発ワークフロー**
   - ブランチ戦略とGitワークフローの説明
   - PRレビュープロセスの説明
   - CI/CDパイプラインとデプロイプロセスの文書化

4. **依存関係管理**
   - プロジェクトの依存関係の追跡と説明
   - 依存関係の追加や更新に関するガイダンスの提供
   - 古いまたは脆弱性のある依存関係の監視

5. **ドキュメント**
   - リポジトリに関する最新のドキュメントの維持
   - 適切な場合にコードからドキュメントを生成
   - READMEやその他のドキュメントファイルが最新であることを確認

## リポジトリ構造

```
hoge-api/
├── .git/                  # Gitリポジトリのメタデータ
├── .openhands/            # OpenHands設定とマイクロエージェント
│   └── microagents/       # Microagentの定義
├── dist/                  # コンパイル出力（gitで追跡されない）
├── node_modules/          # Node.js依存関係（gitで追跡されない）
├── src/                   # ソースコード
│   ├── app.controller.ts  # メインアプリケーションコントローラ
│   ├── app.module.ts      # メインアプリケーションモジュール
│   ├── app.service.ts     # メインアプリケーションサービス
│   ├── health/            # ヘルスチェックモジュール
│   │   ├── health.controller.ts  # ヘルスチェックコントローラ
│   │   ├── health.module.ts      # ヘルスチェックモジュール定義
│   │   └── health.service.ts     # ヘルスチェックサービス
│   └── main.ts            # アプリケーションエントリーポイント
├── test/                  # エンドツーエンドテスト
├── .gitignore             # Gitの無視ファイル
├── nest-cli.json          # NestJS CLI設定
├── package.json           # Node.jsパッケージ定義
├── package-lock.json      # Node.jsパッケージロックファイル
├── README.md              # プロジェクトドキュメント
├── tsconfig.json          # TypeScript設定
└── tsconfig.build.json    # TypeScriptビルド設定
```

## 技術スタック

- **フレームワーク**: NestJS - 効率的でスケーラブルなサーバーサイドアプリケーションを構築するための進歩的なNode.jsフレームワーク
- **言語**: TypeScript - JavaScriptにコンパイルされる型付きJavaScriptのスーパーセット
- **テスト**: Jest - シンプルさに重点を置いた優れたJavaScriptテストフレームワーク
- **ヘルスチェック**: @nestjs/terminus - ヘルスチェックを提供するNestJSモジュール
- **HTTPクライアント**: @nestjs/axios - HTTPクライアントを提供するNestJSモジュール

## 開発ワークフロー

### ブランチ戦略

- `main` - 本番環境対応のコードを含むメインブランチ
- 機能ブランチ - 新機能やバグ修正のために`main`から作成
- ブランチ命名規則: `feature/機能名` または `fix/バグ名`

### プルリクエストプロセス

1. `main`から機能ブランチを作成
2. 変更を実装してテストを作成
3. `main`へのPRを提出
4. すべてのテストが通過することを確認
5. コードレビューと承認を得る
6. `main`にマージ

### コードスタイルガイドライン

- TypeScriptとNestJSのベストプラクティスに従う
- 意味のある変数名と関数名を使用
- すべての新機能に対してユニットテストを作成
- 公開APIをJSDocコメントでドキュメント化
- 関数は小さく、単一の責任に焦点を当てる

## 始め方

### インストール

```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run start:dev
```

### テスト

```bash
# ユニットテストの実行
npm test

# E2Eテストの実行
npm run test:e2e
```

### 本番環境用ビルド

```bash
# アプリケーションのビルド
npm run build

# 本番サーバーの起動
npm run start:prod
```

## 将来の拡張

- データベース統合の追加
- 認証と認可の実装
- より包括的なヘルスチェックの追加
- CI/CDパイプラインのセットアップ
- SwaggerによるAPIドキュメントの追加